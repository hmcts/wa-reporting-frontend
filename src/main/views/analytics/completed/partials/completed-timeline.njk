<h2 class="govuk-heading-m">Tasks completed</h2>
<p class="govuk-body">Completed tasks within the selected date range</p>
{% set timelineChartHtml %}
  <div class="analytics-chart" data-chart-config='{{ charts.timeline | safe }}'></div>
{% endset %}
{% set timelineTableHtml %}
  <div class="analytics-tab-panel">
    {{ csvDownloadButton() }}
    {{ analyticsTable({
      attributes: { 'data-export-csv': 'true', 'data-export-filename': 'completed-timeline.csv', 'data-sortable': 'true' },
      classes: "analytics-table--compact",
      hasTotals: true,
      head: [
        { text: "Completed date" },
        { text: "Tasks", format: "numeric" },
        { text: "Within due date", format: "numeric" },
        { text: "%", format: "numeric" },
        { text: "Outside due date", format: "numeric" },
        { text: "7-day rolling average tasks", format: "numeric" }
      ],
      rows: timelineRows.concat([timelineTotalsRow])
    }) }}
  </div>
{% endset %}
{{ govukTabs({
  id: "timelineTabs",
  items: [
    { label: "Chart", id: "timelineChart", panel: { html: timelineChartHtml } },
    { label: "Data table", id: "timelineTable", panel: { html: timelineTableHtml } }
  ]
}) }}
